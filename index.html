<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google-adsense-account" content="ca-pub-4531749081462125">
    <meta name="twitter:card" content="summary_large_image">
    <meta http-equiv="Content-Security-Policy" content="
        default-src 'self';
        script-src 'self' 'unsafe-inline' https://pagead2.googlesyndication.com https://www.gstatic.com https://www.googletagmanager.com https://cdn.firebase.com https://ep2.adtrafficquality.google https://script.google.com;
        style-src 'self' 'unsafe-inline' https://fonts.googleapis.com https://cdnjs.cloudflare.com;
        img-src 'self' data: https://drive.google.com https://*.googleusercontent.com https://firebasestorage.googleapis.com;
        font-src 'self' https://fonts.gstatic.com;
        connect-src 'self' https://*.firebaseio.com https://*.firebasestorage.googleapis.com https://ep1.adtrafficquality.google https://firebaseinstallations.googleapis.com https://firebase.googleapis.com https://script.google.com; /* Adicionado script.google.com para o Apps Script */
        frame-src 'self' https://googleads.g.doubleclick.net;
    ">
    <title>Centro de Compras - Ofertas do Dia</title>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4531749081462125" crossorigin="anonymous"></script>
    <link rel="preload" href="/logos/logoscentrodecompras.jpeg" as="image">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" media="print" onload="this.media='all'">
    <link rel="stylesheet" href="/style.css" media="print" onload="this.media='all'">
    <link rel="icon" type="image/x-icon" href="/logos/favicon.ico">
    <link rel="icon" type="image/png" sizes="32x32" href="/logos/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/logos/favicon-16x16.png">
    <link rel="apple-touch-icon" sizes="180x180" href="/logos/apple-touch-icon.png">
    <link rel="manifest" href="/logos/site.webmanifest">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" integrity="sha512-1ycn6IcaQQ40/MKBW2W4Rhis/DbILU74C1vSrLJxCq57o941Ym01SwNsOMqvEBFlcgUa6xLiPY/NS5R+E6ztJQ==" crossorigin="anonymous" referrerpolicy="no-referrer" media="print" onload="this.media='all'">
</head>
<body>
    <header class="site-header">
        <div class="logo-container">
            <img src="/logos/logoscentrodecompras.jpeg" alt="Centro de Compras" id="site-logo-img" width="150" height="50" style="cursor: pointer;">
        </div>
        <div class="header-text">
            <h1>Centro de Compra</h1>
            <p>O maior portal de compras do Brasil! Encontre as melhores ofertas.</p>
        </div>
    </header>

    <nav>
        <a href="/index.html">Promo√ß√µes</a>
        <a href="/cupom.html">Cupom de Desconto</a>
        <a href="/sobre.html">Sobre</a>
        <a href="/contato.html">Contato</a>
    </nav>

    <div class="container">
        <aside class="sidebar">
            <h3>Categorias</h3>
            <ul>
                <li class="categoria-item ativa" data-categoria="todas" onclick="filtrarPorCategoria('todas')"><i class="fas fa-list mr-2"></i>Todas</li>
                <li class="categoria-item" data-categoria="eletronicos" onclick="filtrarPorCategoria('eletronicos')"><i class="fas fa-laptop mr-2"></i>Eletr√¥nicos</li>
                <li class="categoria-item" data-categoria="moda" onclick="filtrarPorCategoria('moda')"><i class="fas fa-tshirt mr-2"></i>Moda</li>
                <li class="categoria-item" data-categoria="fitness" onclick="filtrarPorCategoria('fitness')"><i class="fas fa-dumbbell mr-2"></i>Fitness</li>
                <li class="categoria-item" data-categoria="casa" onclick="filtrarPorCategoria('casa')"><i class="fas fa-home mr-2"></i>Casa</li>
                <li class="categoria-item" data-categoria="beleza" onclick="filtrarPorCategoria('beleza')"><i class="fas fa-magic mr-2"></i>Beleza</li>
                <li class="categoria-item" data-categoria="esportes" onclick="filtrarPorCategoria('esportes')"><i class="fas fa-futbol mr-2"></i>Esportes</li>
                <li class="categoria-item" data-categoria="livros" onclick="filtrarPorCategoria('livros')"><i class="fas fa-book mr-2"></i>Livros</li>
                <li class="categoria-item" data-categoria="infantil" onclick="filtrarPorCategoria('infantil')"><i class="fas fa-baby mr-2"></i>Infantil</li>
                <li class="categoria-item" data-categoria="celulares" onclick="filtrarPorCategoria('celulares')"><i class="fas fa-mobile-alt mr-2"></i>Celulares</li>
                <li class="categoria-item" data-categoria="eletrodomesticos" onclick="filtrarPorCategoria('eletrodomesticos')"><i class="fas fa-blender mr-2"></i>Eletrodom√©sticos</li>
                <li class="categoria-item" data-categoria="pet" onclick="filtrarPorCategoria('pet')"><i class="fas fa-paw mr-2"></i>Pet</li>
                <li class="categoria-item" data-categoria="jardinagem" onclick="filtrarPorCategoria('jardinagem')"><i class="fas fa-leaf mr-2"></i>Jardinagem</li>
                <li class="categoria-item" data-categoria="automotivo" onclick="filtrarPorCategoria('automotivo')"><i class="fas fa-car mr-2"></i>Automotivo</li>
                <li class="categoria-item" data-categoria="gastronomia" onclick="filtrarPorCategoria('gastronomia')"><i class="fas fa-utensils mr-2"></i>Gastronomia</li>
                <li class="categoria-item" data-categoria="games" onclick="filtrarPorCategoria('games')"><i class="fas fa-gamepad mr-2"></i>Games</li>
            </ul>
        </aside>

        <main>
            <section>
                <h2>üõçÔ∏è Ofertas do Dia</h2>
                <ins class="adsbygoogle"
                    style="display:inline-block;width:728px;height:90px"
                    data-ad-client="ca-pub-4531749081462125"
                    data-ad-slot="5690664546"></ins>
                <script>
                    (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
                <div class="lojas-parceiras">
                    <h3>üåü Lojas Parceiras</h3>
                    <div class="grid-lojas">
                        <div class="loja-todas ativa" onclick="filtrarPorLoja('todas')"><span>Todas as Lojas</span></div>
                        <div class="loja" data-loja="amazon" onclick="filtrarPorLoja('amazon')">
                            <img src="/logos/amazon.png" alt="Amazon" loading="lazy" width="100" height="40"><span>Amazon</span>
                        </div>
                        <div class="loja" data-loja="magalu" onclick="filtrarPorLoja('magalu')">
                            <img src="/logos/magalu.png" alt="Magalu" loading="lazy" width="100" height="40"><span>Magalu</span>
                        </div>
                        <div class="loja" data-loja="shein" onclick="filtrarPorLoja('shein')">
                            <img src="/logos/shein.png" alt="Shein" loading="lazy" width="100" height="40"><span>Shein</span>
                        </div>
                        <div class="loja" data-loja="shopee" onclick="filtrarPorLoja('shopee')">
                            <img src="/logos/shopee.png" alt="Shopee" loading="lazy" width="100" height="40"><span>Shopee</span>
                        </div>
                        <div class="loja" data-loja="mercadolivre" onclick="filtrarPorLoja('mercadolivre')">
                            <img src="/logos/mercadolivre.jpg" alt="Mercado Livre" loading="lazy" width="100" height="40"><span>Mercado Livre</span>
                        </div>
                        <div class="loja" data-loja="alibaba" onclick="filtrarPorLoja('alibaba')">
                            <img src="/logos/alibaba.png" alt="Alibaba" loading="lazy" width="100" height="40"><span>Alibaba</span>
                        </div>
                    </div>
                </div>
                <input type="text" id="busca" placeholder="Busque por produtos..." class="barra-busca">
                <div id="busca-feedback" class="busca-feedback"></div>
                <div class="loading-spinner" id="loading-spinner">
                    <i class="fas fa-spinner"></i>
                </div>
                <div class="grid-produtos" id="grid-produtos">
                    </div>
                <p class="mensagem-vazia" id="mensagem-vazia" style="display: none;">Nenhum produto encontrado.</p>
                <p class="error-message" id="error-message" style="display: none;"></p>
                <div class="paginacao" id="paginacao">
                    <button id="prev-page" disabled>Anterior</button>
                    <span id="page-info">P√°gina 1</span>
                    <button id="next-page">Pr√≥xima</button>
                </div>
            </section>
            <div class="social-links">
                <a href="https://www.tiktok.com/@cdc.centraldecompras" target="_blank" rel="noopener noreferrer">
                    <div class="icon"><img src="/logos/tiktok.png" alt="TikTok" loading="lazy" width="40" height="40"></div>
                    <span>TikTok</span>
                </a>
                <a href="https://www.instagram.com/cdccentrodecompras/" target="_blank" rel="noopener noreferrer">
                    <div class="icon"><img src="/logos/Instagram.png" alt="Instagram" loading="lazy" width="40" height="40"></div>
                    <span>Instagram</span>
                </a>
                <a href="https://x.com/ComprasCdc" target="_blank" rel="noopener noreferrer">
                    <div class="icon"><img src="/logos/X.png" alt="X" loading="lazy" width="40" height="40"></div>
                    <span>X</span>
                </a>
                <a href="https://www.youtube.com/channel/UCaKHlI-hWqwdAXS6Xsv3ZzA" target="_blank" rel="noopener noreferrer">
                    <div class="icon"><img src="/logos/youtube.png" alt="YouTube" loading="lazy" width="40" height="40"></div>
                    <span>YouTube</span>
                </a>
            </div>
            <a href="https://api.whatsapp.com/send?phone=5521975179737" class="whatsapp" target="_blank" rel="noopener noreferrer">üì≤ WhatsApp</a>
            <a href="https://t.me/centraldecomprascdc" class="telegram" target="_blank" rel="noopener noreferrer">üì¢ Telegram</a>
        </main>
    </div>

    <div class="modal" id="imageModal">
        <button class="modal-close" onclick="closeModal()">‚úï</button>
        <div class="modal-content">
            <div class="carrossel-imagens" id="modalCarrosselImagens"></div>
            <button class="carrossel-prev" onclick="moveModalCarrossel(-1)">‚óÑ</button>
            <button class="carrossel-next" onclick="moveModalCarrossel(1)">‚ñ∂</button>
            <div class="carrossel-dots" id="modalCarrosselDots"></div>
        </div>
    </div>

    <footer>
        <p>üîß Todos os direitos reservados <strong>Grupo Centro de Compra "CdC"</strong> ¬© <span id="year"></span></p>
        <div class="credibilidade-nota">
            <p><strong>Sobre credibilidade:</strong> √â importante notar que esse site √© apenas um portal de descontos e afiliado, n√£o uma loja direta. Ele redireciona para plataformas terceiras. Verifique sempre se o cupom √© v√°lido diretamente na loja original, pois promo√ß√µes podem expirar ou n√£o se aplicar a certos produtos.</p>
        </div>
    </footer>

    <div class="robo-assistente">
        <a href="https://api.whatsapp.com/send?phone=5521975179737" target="_blank" rel="noopener noreferrer">
            <img src="/imagens/robo.jpg" alt="Rob√¥ Assistente" class="robo-imagem" loading="lazy" width="60" height="60">
            <div class="robo-texto">Posso ajudar?</div>
        </a>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getFirestore } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";
        import { getAnalytics } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-analytics.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDryJc0Y7JV_Os5DZdEDts5XaFUEtJ7wDk",
            authDomain: "centrodecompra-5fa91.firebaseapp.com",
            projectId: "centrodecompra-5fa91",
            storageBucket: "centrodecompra-5fa91.appspot.com",
            messagingSenderId: "276696026262",
            appId: "1:276696026262:web:979a68c0796ea1d17346b7",
            measurementId: "G-PM11NQL61N"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const analytics = getAnalytics(app);

        window.firebaseApp = app;
        window.firebaseDb = db;
    </script>
    <script defer src="/script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const logo = document.getElementById('site-logo-img');
            let clickCount = 0;
            let clickTimer = null;

            if (!logo) {
                console.error('Erro: Logo com ID "site-logo-img" n√£o encontrada');
                return;
            }

            console.log('Script de tr√™s cliques inicializado');

            logo.addEventListener('click', (event) => {
                event.preventDefault();
                clickCount++;
                console.log(`Clique ${clickCount} na logo`);

                if (clickCount === 1) {
                    clickTimer = setTimeout(() => {
                        console.log('Contagem de cliques resetada');
                        clickCount = 0;
                    }, 2000);
                }

                if (clickCount === 3) {
                    console.log('Tr√™s cliques detectados, redirecionando para admin');
                    clearTimeout(clickTimer);
                    window.location.href = '/add-produto.html?tempToken=triple-click-access';
                    clickCount = 0;
                }
            });
        });

        // --- IN√çCIO DO C√ìDIGO PARA INTEGRAR COM O GOOGLE APPS SCRIPT ---

        // Seu ID de Implanta√ß√£o do Google Apps Script - ATUALIZADO PARA A √öLTIMA URL
        const DEPLOYMENT_ID = 'AKfycbyFVmPFLfed9asgIXPjHTMuAxfkqGJMAuvBCPlgtEjO'; 
        const SCRIPT_URL = `https://script.google.com/macros/s/${DEPLOYMENT_ID}/exec`;
        const CALLBACK_FUNCTION_NAME = 'renderizarProdutosDaPlanilha'; // Um nome √∫nico para a fun√ß√£o de callback

        const gridProdutos = document.getElementById('grid-produtos');
        const loadingSpinner = document.getElementById('loading-spinner');
        const mensagemVazia = document.getElementById('mensagem-vazia');
        const errorMessage = document.getElementById('error-message');

        // Fun√ß√£o que o Google Apps Script vai chamar (JSONP)
        // O nome desta fun√ß√£o DEVE ser o mesmo que em CALLBACK_FUNCTION_NAME
        window.renderizarProdutosDaPlanilha = function(produtos) {
            loadingSpinner.style.display = 'none'; // Esconde o spinner de carregamento
            gridProdutos.innerHTML = ''; // Limpa qualquer conte√∫do existente

            if (!produtos || produtos.length === 0) {
                mensagemVazia.style.display = 'block'; // Mostra a mensagem de "nenhum produto"
                return;
            }

            // Esconde a mensagem de "nenhum produto" caso existam produtos
            mensagemVazia.style.display = 'none';

            produtos.forEach(produto => {
                // Cria o card do produto
                const produtoCard = document.createElement('div');
                produtoCard.className = 'produto-card'; // Assumindo que voc√™ tem estilos para 'produto-card' no seu style.css

                // Imagem do produto
                // O campo da imagem agora √© 'imagens' conforme a ordem da planilha
                if (produto.imagens) { 
                    const img = document.createElement('img');
                    img.src = produto.imagens; 
                    img.alt = produto.nome || 'Produto';
                    img.loading = 'lazy'; // Para carregamento otimizado
                    produtoCard.appendChild(img);
                }

                // Nome do produto (com link)
                const titulo = document.createElement('h3');
                const link = document.createElement('a');
                link.href = produto.link || '#';
                link.target = '_blank'; // Abre em nova aba
                link.rel = 'noopener noreferrer'; // Seguran√ßa para links externos
                link.textContent = produto.nome || 'Produto sem nome';
                titulo.appendChild(link);
                produtoCard.appendChild(titulo);

                // Pre√ßo do produto
                const preco = document.createElement('p');
                preco.className = 'preco'; // Adicione uma classe para estiliza√ß√£o se quiser
                preco.textContent = `R$ ${parseFloat(produto.preco).toFixed(2).replace('.', ',')}` || 'Pre√ßo indispon√≠vel'; // Formata para BRL
                produtoCard.appendChild(preco);

                // Data (opcional, pode ser formatada) - Adicionada a data atual se n√£o houver no produto
                const data = document.createElement('p');
                let dataFormatada = 'N/A';
                if (produto.data) { // Se houver um campo 'data' na planilha
                    try {
                        const d = new Date(produto.data);
                        if (!isNaN(d.getTime())) {
                            dataFormatada = `Adicionado em: ${d.toLocaleDateString('pt-BR')}`;
                        } else {
                            dataFormatada = `Adicionado em: ${produto.data}`;
                        }
                    } catch (e) {
                        dataFormatada = `Adicionado em: ${produto.data}`;
                    }
                } else { // Se n√£o houver campo 'data' na planilha, usa a data atual
                    const now = new Date();
                    dataFormatada = `Adicionado em: ${now.toLocaleDateString('pt-BR')}`;
                }
                data.className = 'data-adicao';
                data.textContent = dataFormatada;
                produtoCard.appendChild(data);
                
                // Bot√£o "Ir para a Loja"
                const button = document.createElement('a');
                button.href = produto.link || '#';
                button.target = '_blank';
                button.rel = 'noopener noreferrer';
                button.className = 'btn-ir-loja'; // Adicione uma classe para estiliza√ß√£o
                button.textContent = 'Ir para a Loja';
                produtoCard.appendChild(button);

                gridProdutos.appendChild(produtoCard);
            });
        };

        // Fun√ß√£o para carregar o script JSONP do Google Apps Script
        function loadProductsFromGoogleSheet() {
            loadingSpinner.style.display = 'block'; // Mostra o spinner antes de carregar
            mensagemVazia.style.display = 'none'; // Esconde mensagem de vazio
            errorMessage.style.display = 'none'; // Esconde mensagem de erro

            const script = document.createElement('script');
            script.src = `${SCRIPT_URL}?callback=${CALLBACK_FUNCTION_NAME}`;
            script.onerror = () => {
                loadingSpinner.style.display = 'none'; // Esconde o spinner em caso de erro
                errorMessage.textContent = 'Ocorreu um erro ao carregar os produtos. Tente novamente mais tarde.';
                errorMessage.style.display = 'block';
                console.error('Erro ao carregar dados do Google Apps Script.');
            };
            document.head.appendChild(script);

            // Remova o script ap√≥s o carregamento para evitar duplica√ß√£o em chamadas futuras
            script.onload = () => {
                document.head.removeChild(script);
            };
        }

        // Chama a fun√ß√£o para carregar os produtos quando a p√°gina for carregada
        document.addEventListener('DOMContentLoaded', loadProductsFromGoogleSheet);

        // --- FIM DO C√ìDIGO PARA INTEGRAR COM O GOOGLE APPS SCRIPT ---
    </script>
</body>
</html>
