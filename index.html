<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="description" content="Ofertas com descontos reais nas principais lojas como Amazon, Shein, Shopee, Magalu, Mercado Livre e Alibaba. Links de afiliado seguros e atualizados." />
  <meta property="og:title" content="Centro de Compras - Ofertas e Descontos" />
  <meta property="og:description" content="Encontre as melhores ofertas em lojas como Amazon, Shein, Shopee, Magalu, Mercado Livre e Alibaba. Links de afiliados seguros e atualizados!" />
  <meta property="og:image" content="logos/centrodecompras.jpg" />
  <meta property="og:url" content="https://seu-site.com" />
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="Centro de Compras - Ofertas e Descontos" />
  <meta name="twitter:description" content="Encontre as melhores ofertas em lojas como Amazon, Shein, Shopee, Magalu, Mercado Livre e Alibaba. Links de afiliados seguros e atualizados!" />
  <meta name="twitter:image" content="logos/centrodecompras.jpg" />
  <title>Centro de Compras - Ofertas do Dia</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="site-header" role="banner">
    <div class="logo-container">
      <a href="#" aria-label="Centro de Compras - P√°gina inicial">
        <img src="logos/centrodecompras.jpg" alt="Logo Centro de Compras" id="logo" loading="lazy" />
      </a>
    </div>
    <div class="header-text">
      <h1>Centro de Compras</h1>
      <p>O maior portal de ofertas do Brasil! Descubra as melhores oportunidades nos maiores sites de venda, com links diretos para sua compra.</p>
    </div>
  </header>

  <nav role="navigation" aria-label="Menu principal">
    <ul class="menu-principal">
      <li><a href="index.html">Promo√ß√µes</a></li>
      <li><a href="cupom.html">Cupom de desconto</a></li>
      <li><a href="sobre.html">Sobre</a></li>
      <li><a href="contato.html">Contato</a></li>
    </ul>
  </nav>

  <div class="container">
    <aside class="sidebar-categorias" role="complementary" aria-label="Categorias de produtos">
      <h2>Categorias</h2>
      <ul>
        <li tabindex="0" class="categoria-item ativa" data-categoria="todas" role="button" aria-pressed="true" aria-label="Filtrar por Todas as Categorias">Todas as Categorias</li>
        <li tabindex="0" class="categoria-item" data-categoria="eletronicos" role="button" aria-pressed="false" aria-label="Filtrar por Eletr√¥nicos">Eletr√¥nicos</li>
        <li tabindex="0" class="categoria-item" data-categoria="moda" role="button" aria-pressed="false" aria-label="Filtrar por Moda">Moda</li>
        <li tabindex="0" class="categoria-item" data-categoria="fitness" role="button" aria-pressed="false" aria-label="Filtrar por Fitness">Fitness</li>
        <li tabindex="0" class="categoria-item" data-categoria="casa" role="button" aria-pressed="false" aria-label="Filtrar por Casa e Decora√ß√£o">Casa e Decora√ß√£o</li>
        <li tabindex="0" class="categoria-item" data-categoria="beleza" role="button" aria-pressed="false" aria-label="Filtrar por Beleza">Beleza</li>
        <li tabindex="0" class="categoria-item" data-categoria="esportes" role="button" aria-pressed="false" aria-label="Filtrar por Esportes">Esportes</li>
        <li tabindex="0" class="categoria-item" data-categoria="livros" role="button" aria-pressed="false" aria-label="Filtrar por Livros">Livros</li>
        <li tabindex="0" class="categoria-item" data-categoria="infantil" role="button" aria-pressed="false" aria-label="Filtrar por Infantil">Infantil</li>
        <li tabindex="0" class="categoria-item" data-categoria="celulares" role="button" aria-pressed="false" aria-label="Filtrar por Celulares">Celulares</li>
        <li tabindex="0" class="categoria-item" data-categoria="eletrodomesticos" role="button" aria-pressed="false" aria-label="Filtrar por Eletrodom√©sticos">Eletrodom√©sticos</li>
      </ul>
    </aside>

    <main role="main">
      <section id="ofertas-section" aria-labelledby="ofertas-titulo">
        <h2 id="ofertas-titulo">üõçÔ∏è Ofertas do Dia</h2>

        <div class="lojas-parceiras" aria-label="Lojas parceiras para filtrar ofertas">
          <h3>üåü Lojas Parceiras</h3>
          <div class="grid-lojas" role="list">
            <div class="loja-todas ativa" role="button" tabindex="0" aria-pressed="true" aria-label="Filtrar por Todas as Lojas" data-loja="todas">Todas as Lojas</div>
            <div class="loja" role="button" tabindex="0" aria-pressed="false" aria-label="Filtrar por Amazon" data-loja="amazon">
              <img src="logos/amazon.png" alt="Logo da Amazon" loading="lazy" />
              <span>Amazon</span>
            </div>
            <div class="loja" role="button" tabindex="0" aria-pressed="false" aria-label="Filtrar por Magalu" data-loja="magalu">
              <img src="logos/magalu.png" alt="Logo da Magalu" loading="lazy" />
              <span>Magalu</span>
            </div>
            <div class="loja" role="button" tabindex="0" aria-pressed="false" aria-label="Filtrar por Shein" data-loja="shein">
              <img src="logos/shein.png" alt="Logo da Shein" loading="lazy" />
              <span>Shein</span>
            </div>
            <div class="loja" role="button" tabindex="0" aria-pressed="false" aria-label="Filtrar por Shopee" data-loja="shopee">
              <img src="logos/shopee.png" alt="Logo da Shopee" loading="lazy" />
              <span>Shopee</span>
            </div>
            <div class="loja" role="button" tabindex="0" aria-pressed="false" aria-label="Filtrar por Mercado Livre" data-loja="mercadolivre">
              <img src="logos/mercadolivre.jpg" alt="Logo do Mercado Livre" loading="lazy" />
              <span>Mercado Livre</span>
            </div>
            <div class="loja" role="button" tabindex="0" aria-pressed="false" aria-label="Filtrar por Alibaba" data-loja="alibaba">
              <img src="logos/alibaba.png" alt="Logo da Alibaba" loading="lazy" />
              <span>Alibaba</span>
            </div>
          </div>
        </div>

        <input
          type="search"
          id="busca"
          class="barra-busca"
          placeholder="Busque por produtos..."
          aria-label="Buscar produtos"
          aria-describedby="busca-instrucao"
        />
        <span id="busca-instrucao" class="sr-only">Digite o nome do produto para filtrar os resultados.</span>
        <div id="busca-feedback" class="busca-feedback" aria-live="polite" style="display:none;">Buscando...</div>
        <div id="loading-spinner" class="loading-spinner" aria-live="assertive" style="display:none;">Carregando...</div>

        <div id="grid-produtos" class="grid-produtos" role="list" aria-live="polite"></div>
        <p id="mensagem-vazia" class="mensagem-vazia" style="display:none;">Nenhum produto encontrado.</p>
      </section>

      <nav class="contatos-rapidos" aria-label="Atendimento e canais sociais">
        <a class="whatsapp" href="https://wa.me/5521975179737" target="_blank" rel="noopener noreferrer" aria-label="Atendimento via WhatsApp">üì≤ Atendimento via WhatsApp</a>
        <a class="telegram" href="https://t.me/boost/centraldecomprascdc" target="_blank" rel="noopener noreferrer" aria-label="Canal no Telegram">üì¢ Canal no Telegram</a>

        <div class="social-links">
          <a href="https://www.tiktok.com/@cdc.centraldecompas?_t=ZM-8vYQlF9u1dH&_r=1" target="_blank" rel="noopener noreferrer" aria-label="TikTok">
            <img src="logos/tiktok.png" alt="√çcone do TikTok" loading="lazy" />
            <span>TikTok</span>
          </a>
          <a href="https://www.instagram.com/cdccentrodecompras/?utm_source=qr&r=nametag" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
            <img src="logos/instagram.png" alt="√çcone do Instagram" loading="lazy" />
            <span>Instagram</span>
          </a>
          <a href="https://x.com/ComprasCdc" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
            <img src="logos/x.png" alt="√çcone do X" loading="lazy" />
            <span>X</span>
          </a>
          <a href="https://www.youtube.com/channel/UCaKHlI-hWqwdAXS6Xsv3ZzA" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
            <img src="logos/youtube.png" alt="√çcone do YouTube" loading="lazy" />
            <span>YouTube</span>
          </a>
        </div>
      </nav>
    </main>
  </div>

  <footer role="contentinfo">
    <p>üîß Todos os direitos reservados <strong>Grupo Centro de Compras "CdC"</strong> ¬© <span id="year"></span></p>
  </footer>

  <div class="robo-assistente" aria-label="Assistente virtual">
    <a href="https://wa.me/5521975179737" target="_blank" rel="noopener noreferrer">
      <img src="imagens/robo.jpg" alt="Rob√¥ Assistente" class="robo-imagem" />
      <div class="robo-texto">Posso ajudar?</div>
    </a>
  </div>

  <script>
    // Atualiza o ano no rodap√©
    document.getElementById('year').textContent = new Date().getFullYear();

    const API_URL = 'https://centrodecompra-backend.onrender.com';

    const gridProdutos = document.getElementById('grid-produtos');
    const buscaInput = document.getElementById('busca');
    const mensagemVazia = document.getElementById('mensagem-vazia');
    const loadingSpinner = document.getElementById('loading-spinner');
    const buscaFeedback = document.getElementById('busca-feedback');

    let produtos = [];
    let filtroCategoria = 'todas';
    let filtroLoja = 'todas';

    // Fun√ß√£o para carregar produtos do backend
    async function carregarProdutos() {
      try {
        mostrarLoading(true);
        const response = await fetch(`${API_URL}/produtos`);
        if (!response.ok) throw new Error('Falha ao buscar produtos');
        produtos = await response.json();
        mostrarLoading(false);
        renderizarProdutos();
      } catch (error) {
        mostrarLoading(false);
        gridProdutos.innerHTML = '<p class="erro">Erro ao carregar produtos. Tente novamente mais tarde.</p>';
      }
    }

    // Mostrar/ocultar loading e feedback
    function mostrarLoading(mostrar) {
      loadingSpinner.style.display = mostrar ? 'block' : 'none';
      buscaFeedback.style.display = mostrar ? 'block' : 'none';
    }

    // Renderizar produtos filtrados
    function renderizarProdutos() {
      const termoBusca = buscaInput.value.trim().toLowerCase();

      const filtrados = produtos.filter(produto => {
        const porCategoria = filtroCategoria === 'todas' || produto.categoria === filtroCategoria;
        const porLoja = filtroLoja === 'todas' || produto.loja === filtroLoja;
        const porBusca = produto.nome.toLowerCase().includes(termoBusca);
        return porCategoria && porLoja && porBusca;
      });

      if (filtrados.length === 0) {
        mensagemVazia.style.display = 'block';
        gridProdutos.innerHTML = '';
      } else {
        mensagemVazia.style.display = 'none';
        gridProdutos.innerHTML = filtrados.map(p => `
          <article class="card-produto" role="listitem" tabindex="0" aria-label="${p.nome}, pre√ßo R$${p.preco}">
            <a href="${p.url}" target="_blank" rel="nofollow noopener noreferrer" aria-label="Link para ${p.nome} na loja ${p.loja}">
              <img src="${p.imagem}" alt="Imagem de ${p.nome}" loading="lazy" />
              <h3>${p.nome}</h3>
              <p class="preco">R$ ${p.preco.toFixed(2)}</p>
            </a>
          </article>
        `).join('');
      }
    }

    // Atualizar filtros de categoria
    function atualizarFiltroCategoria(categoria) {
      filtroCategoria = categoria;
      document.querySelectorAll('.categoria-item').forEach(item => {
        const ativo = item.dataset.categoria === categoria;
        item.classList.toggle('ativa', ativo);
        item.setAttribute('aria-pressed', ativo);
      });
      renderizarProdutos();
    }

    // Atualizar filtros de loja
    function atualizarFiltroLoja(loja) {
      filtroLoja = loja;
      document.querySelectorAll('.loja').forEach(item => {
        const ativo = item.dataset.loja === loja;
        item.classList.toggle('ativa', ativo);
        item.setAttribute('aria-pressed', ativo);
      });
      // Tamb√©m o bot√£o "Todas as Lojas"
      const todasLojasBtn = document.querySelector('.loja-todas');
      const todasAtiva = loja === 'todas';
      todasLojasBtn.classList.toggle('ativa', todasAtiva);
      todasLojasBtn.setAttribute('aria-pressed', todasAtiva);

      renderizarProdutos();
    }

    // Eventos de clique e teclado para categorias
    document.querySelectorAll('.categoria-item').forEach(item => {
      item.addEventListener('click', () => atualizarFiltroCategoria(item.dataset.categoria));
      item.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          atualizarFiltroCategoria(item.dataset.categoria);
        }
      });
    });

    // Eventos de clique e teclado para lojas
    document.querySelectorAll('.loja, .loja-todas').forEach(item => {
      item.addEventListener('click', () => atualizarFiltroLoja(item.dataset.loja));
      item.addEventListener('keydown', e => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          atualizarFiltroLoja(item.dataset.loja);
        }
      });
    });

    // Evento de busca com debounce
    let debounceTimeout;
    buscaInput.addEventListener('input', () => {
      clearTimeout(debounceTimeout);
      debounceTimeout = setTimeout(() => {
        renderizarProdutos();
      }, 300);
    });

    // Inicializa
    carregarProdutos();
  </script>
</body>
</html>
