<!DOCTYPE html>
<html lang="pt-br">
<head>
ย ย <meta charset="UTF-8">
ย ย <meta name="viewport" content="width=device-width, initial-scale=1">
ย ย <meta name="description" content="Ofertas com descontos reais nas principais lojas como Amazon, Shein, Shopee, Magalu, Mercado Livre e Alibaba. Links de afiliado seguros e atualizados.">
ย ย <meta property="og:title" content="Centro de Compras - Ofertas e Descontos">
ย ย <meta property="og:description" content="Encontre as melhores ofertas em lojas como Amazon, Shein, Shopee, Magalu, Mercado Livre e Alibaba. Links de afiliados seguros e atualizados!">
ย ย <meta property="og:image" content="logos/centrodecompras.jpg">
ย ย <meta property="og:url" content="https://centrodecompra.com.br/">
ย ย <meta name="twitter:card" content="summary_large_image">
ย ย <meta name="twitter:title" content="Centro de Compras - Ofertas e Descontos">
ย ย <meta name="twitter:description" content="Encontre as melhores ofertas em lojas como Amazon, Shein, Shopee, Magalu, Mercado Livre e Alibaba. Links de afiliados seguros e atualizados!">
ย ย <meta name="twitter:image" content="logos/centrodecompras.jpg">
ย ย <title>Centro de Compras - Ofertas do Dia</title>
ย ย <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
ย ย <link rel="stylesheet" href="style.css">
ย ย <style>
ย ย ย ย /* Estilos mantidos como no cรณdigo original */
ย ย ย ย .modal {
ย ย ย ย ย ย display: none;
ย ย ย ย ย ย position: fixed;
ย ย ย ย ย ย top: 0;
ย ย ย ย ย ย left: 0;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย ย ย background: rgba(0, 0, 0, 0.8);
ย ย ย ย ย ย z-index: 1000;
ย ย ย ย ย ย justify-content: center;
ย ย ย ย ย ย align-items: center;
ย ย ย ย }
ย ย ย ย .modal-content {
ย ย ย ย ย ย position: relative;
ย ย ย ย ย ย max-width: 90%;
ย ย ย ย ย ย max-height: 90%;
ย ย ย ย ย ย width: auto;
ย ย ย ย ย ย height: auto;
ย ย ย ย }
ย ย ย ย .modal-content .carrossel-imagens {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย overflow: hidden;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย }
ย ย ย ย .modal-content .carrossel-imagens img {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: auto;
ย ย ย ย ย ย max-width: 800px;
ย ย ย ย ย ย max-height: 600px;
ย ย ย ย ย ย object-fit: contain;
ย ย ย ย ย ย flex: 0 0 100%;
ย ย ย ย ย ย transition: transform 0.3s ease;
ย ย ย ย }
ย ย ย ย .modal-close {
ย ย ย ย ย ย position: absolute;
ย ย ย ย ย ย top: 10px;
ย ย ย ย ย ย right: 10px;
ย ย ย ย ย ย background: #ff6200;
ย ย ย ย ย ย color: #fff;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย padding: 8px 12px;
ย ย ย ย ย ย border-radius: 50%;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย font-size: 16px;
ย ย ย ย }
ย ย ย ย .carrossel-prev,
ย ย ย ย .carrossel-next {
ย ย ย ย ย ย position: absolute;
ย ย ย ย ย ย top: 50%;
ย ย ย ย ย ย transform: translateY(-50%);
ย ย ย ย ย ย background: rgba(0, 0, 0, 0.5);
ย ย ย ย ย ย color: #fff;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย padding: 10px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย font-size: 18px;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย display: none;
ย ย ย ย }
ย ย ย ย .carrossel-prev.visible,
ย ย ย ย .carrossel-next.visible {
ย ย ย ย ย ย display: block;
ย ย ย ย }
ย ย ย ย .carrossel-prev { left: 10px; }
ย ย ย ย .carrossel-next { right: 10px; }
ย ย ย ย .carrossel-dots {
ย ย ย ย ย ย position: absolute;
ย ย ย ย ย ย bottom: 10px;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย text-align: center;
ย ย ย ย }
ย ย ย ย .carrossel-dot {
ย ย ย ย ย ย display: inline-block;
ย ย ย ย ย ย width: 10px;
ย ย ย ย ย ย height: 10px;
ย ย ย ย ย ย background: #ccc;
ย ย ย ย ย ย border-radius: 50%;
ย ย ย ย ย ย margin: 0 5px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย }
ย ย ย ย .carrossel-dot.ativo { background: #ff6200; }
ย ย ย ย .modal-error {
ย ย ย ย ย ย color: red;
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย margin-top: 10px;
ย ย ย ย ย ย font-size: 14px;
ย ย ย ย }
ย ย ย ย .error-message {
ย ย ย ย ย ย color: red;
ย ย ย ย ย ย text-align: center;
ย ย ย ย ย ย margin-top: 10px;
ย ย ย ย }
ย ย ย ย .tarja-preco {
ย ย ย ย ย ย display: inline-block;
ย ย ย ย ย ย background: #ff6200;
ย ย ย ย ย ย color: white;
ย ย ย ย ย ย padding: 6px 10px;
ย ย ย ย ย ย margin: 8px 0;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย text-decoration: none;
ย ย ย ย ย ย font-weight: bold;
ย ย ย ย ย ย font-size: 12px;
ย ย ย ย }
ย ย ย ย .tarja-preco:hover { background: #e55a00; }
ย ย ย ย #load-more {
ย ย ย ย ย ย display: none;
ย ย ย ย ย ย margin: 20px auto;
ย ย ย ย ย ย padding: 10px 20px;
ย ย ย ย ย ย background: #ff6200;
ย ย ย ย ย ย color: white;
ย ย ย ย ย ย border: none;
ย ย ย ย ย ย border-radius: 4px;
ย ย ย ย ย ย cursor: pointer;
ย ย ย ย ย ย font-size: 16px;
ย ย ย ย }
ย ย ย ย #load-more:hover { background: #e55a00; }
ย ย ย ย .produto-card {
ย ย ย ย ย ย transition: transform 0.2s;
ย ย ย ย ย ย background: white;
ย ย ย ย ย ย border-radius: 8px;
ย ย ย ย ย ย padding: 10px;
ย ย ย ย ย ย box-shadow: 0 2px 4px rgba(0,0,0,0.1);
ย ย ย ย ย ย max-height: 300px;
ย ย ย ย }
ย ย ย ย .produto-card:hover { transform: translateY(-5px); }
ย ย ย ย .produto-card span {
ย ย ย ย ย ย font-size: 14px;
ย ย ย ย ย ย display: block;
ย ย ย ย ย ย margin: 5px 0;
ย ย ย ย }
ย ย ย ย .carrossel {
ย ย ย ย ย ย position: relative;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย max-height: 150px;
ย ย ย ย ย ย overflow: hidden;
ย ย ย ย }
ย ย ย ย .carrossel-imagens {
ย ย ย ย ย ย display: flex;
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 100%;
ย ย ย ย }
ย ย ย ย .carrossel-imagens img {
ย ย ย ย ย ย width: 100%;
ย ย ย ย ย ย height: 150px;
ย ย ย ย ย ย object-fit: cover;
ย ย ย ย ย ย flex: 0 0 100%;
ย ย ย ย ย ย transition: transform 0.3s ease;
ย ย ย ย }
ย ย ย ย .grid-produtos {
ย ย ย ย ย ย display: grid;
ย ย ย ย ย ย grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
ย ย ย ย ย ย gap: 15px;
ย ย ย ย }
ย ย ย ย @media (max-width: 600px) {
ย ย ย ย ย ย .grid-produtos {
ย ย ย ย ย ย ย ย grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
ย ย ย ย ย ย }
ย ย ย ย ย ย .produto-card {
ย ย ย ย ย ย ย ย max-height: 250px;
ย ย ย ย ย ย }
ย ย ย ย ย ย .carrossel-imagens img {
ย ย ย ย ย ย ย ย height: 120px;
ย ย ย ย ย ย }
ย ย ย ย ย ย .tarja-preco {
ย ย ย ย ย ย ย ย font-size: 10px;
ย ย ย ย ย ย ย ย padding: 5px 8px;
ย ย ย ย ย ย }
ย ย ย ย ย ย .produto-card span {
ย ย ย ย ย ย ย ย font-size: 12px;
ย ย ย ย ย ย }
ย ย ย ย ย ย .modal-content .carrossel-imagens img {
ย ย ย ย ย ย ย ย max-width: 100%;
ย ย ย ย ย ย ย ย max-height: 400px;
ย ย ย ย ย ย }
ย ย ย ย }
ย ย </style>
</head>
<body>
ย ย <header class="site-header">
ย ย ย ย <div class="logo-container">
ย ย ย ย ย ย <a href="#" aria-label="Voltar para a pรกgina inicial"><img src="logos/centrodecompras.jpg" alt="Centro de Compras" loading="lazy" id="site-logo"></a>
ย ย ย ย </div>
ย ย ย ย <div class="header-text">
ย ย ย ย ย ย <h1>Centro de Compras</h1>
ย ย ย ย ย ย <p>O maior portal de ofertas do Brasil! Descubra as melhores oportunidades nos maiores sites de venda, com links diretos para sua compra.</p>
ย ย ย ย </div>
ย ย </header>
ย ย <nav aria-label="Navegaรงรฃo principal">
ย ย ย ย <a href="index.html">Promoรงรตes</a>
ย ย ย ย <a href="cupom.html">Cupom de desconto</a>
ย ย ย ย <a href="sobre.html">Sobre</a>
ย ย ย ย <a href="contato.html">Contato</a>
ย ย </nav>
ย ย <div class="container">
ย ย ย ย <aside class="sidebar-categorias">
ย ย ย ย ย ย <h3>Categorias</h3>
ย ย ย ย ย ย <ul role="listbox">
ย ย ย ย ย ย ย ย <li class="categoria-item ativa" data-categoria="todas" onclick="filtrarPorCategoria('todas')" role="option" aria-selected="true" tabindex="0">Todas as Categorias</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="eletronicos" onclick="filtrarPorCategoria('eletronicos')" role="option" aria-selected="false" tabindex="0">Eletrรดnicos</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="moda" onclick="filtrarPorCategoria('moda')" role="option" aria-selected="false" tabindex="0">Moda</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="fitness" onclick="filtrarPorCategoria('fitness')" role="option" aria-selected="false" tabindex="0">Fitness</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="casa" onclick="filtrarPorCategoria('casa')" role="option" aria-selected="false" tabindex="0">Casa e Decoraรงรฃo</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="beleza" onclick="filtrarPorCategoria('beleza')" role="option" aria-selected="false" tabindex="0">Beleza</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="esportes" onclick="filtrarPorCategoria('esportes')" role="option" aria-selected="false" tabindex="0">Esportes</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="livros" onclick="filtrarPorCategoria('livros')" role="option" aria-selected="false" tabindex="0">Livros</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="infantil" onclick="filtrarPorCategoria('infantil')" role="option" aria-selected="false" tabindex="0">Infantil</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="Celulares" onclick="filtrarPorCategoria('Celulares')" role="option" aria-selected="false" tabindex="0">Celulares</li>
ย ย ย ย ย ย ย ย <li class="categoria-item" data-categoria="Eletrodomรฉsticos" onclick="filtrarPorCategoria('Eletrodomรฉsticos')" role="option" aria-selected="false" tabindex="0">Eletrodomรฉsticos</li>
ย ย ย ย ย ย </ul>
ย ย ย ย </aside>
ย ย ย ย <main>
ย ย ย ย ย ย <section id="ofertas-section" aria-live="polite">
ย ย ย ย ย ย ย ย <h2 id="ofertas-titulo">๐๏ธ Ofertas do Dia</h2>
ย ย ย ย ย ย ย ย <div class="lojas-parceiras">
ย ย ย ย ย ย ย ย ย ย <h3>๐ Lojas Parceiras</h3>
ย ย ย ย ย ย ย ย ย ย <div class="grid-lojas" role="group" aria-label="Filtro por lojas parceiras">
ย ย ย ย ย ย ย ย ย ย ย ย <div class="loja-todas ativa" data-loja="todas" onclick="filtrarPorLoja('todas')" role="button" aria-pressed="true" tabindex="0"><span>Todas as Lojas</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="loja" data-loja="amazon" onclick="filtrarPorLoja('amazon')" role="button" aria-pressed="false" tabindex="0"><img src="logos/amazon.png" alt="Logo da Amazon" loading="lazy"><span class="amazon">Amazon</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="loja" data-loja="magalu" onclick="filtrarPorLoja('magalu')" role="button" aria-pressed="false" tabindex="0"><img src="logos/magalu.png" alt="Logo da Magalu" loading="lazy"><span class="magalu">Magalu</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="loja" data-loja="shein" onclick="filtrarPorLoja('shein')" role="button" aria-pressed="false" tabindex="0"><img src="logos/shein.png" alt="Logo da Shein" loading="lazy"><span class="shein">Shein</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="loja" data-loja="shopee" onclick="filtrarPorLoja('shopee')" role="button" aria-pressed="false" tabindex="0"><img src="logos/shopee.png" alt="Logo da Shopee" loading="lazy"><span class="shopee">Shopee</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="loja" data-loja="mercadolivre" onclick="filtrarPorLoja('mercadolivre')" role="button" aria-pressed="false" tabindex="0"><img src="logos/mercadolivre.jpg" alt="Logo do Mercado Livre" loading="lazy"><span class="mercadolivre">Mercado Livre</span></div>
ย ย ย ย ย ย ย ย ย ย ย ย <div class="loja" data-loja="alibaba" onclick="filtrarPorLoja('alibaba')" role="button" aria-pressed="false" tabindex="0"><img src="logos/alibaba.png" alt="Logo da Alibaba" loading="lazy"><span class="alibaba">Alibaba</span></div>
ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย <input type="text" id="busca" placeholder="Busque por produtos..." class="barra-busca" aria-label="Buscar produtos" aria-describedby="busca-instrucao">
ย ย ย ย ย ย ย ย <span id="busca-instrucao" class="sr-only">Digite o nome do produto para filtrar os resultados.</span>
ย ย ย ย ย ย ย ย <div id="busca-feedback" class="busca-feedback">Buscando...</div>
ย ย ย ย ย ย ย ย <div class="loading-spinner" id="loading-spinner"></div>
ย ย ย ย ย ย ย ย <div class="grid-produtos" id="grid-produtos"></div>
ย ย ย ย ย ย ย ย <button id="load-more" onclick="carregarMaisProdutos()">Carregar Mais</button>
ย ย ย ย ย ย ย ย <p class="mensagem-vazia" id="mensagem-vazia" aria-live="polite">Nenhum produto encontrado.</p>
ย ย ย ย ย ย ย ย <p class="error-message" id="error-message" style="display: none;" aria-live="assertive"></p>
ย ย ย ย ย ย </section>
ย ย ย ย ย ย <a class="whatsapp" href="https://wa.me/5521975179737" target="_blank">๐ฒ Atendimento via WhatsApp</a>
ย ย ย ย ย ย <a class="telegram" href="https://t.me/boost/centraldecomprascdc" target="_blank">๐ข Canal no Telegram</a>
ย ย ย ย ย ย <div class="social-links">
ย ย ย ย ย ย ย ย <a href="https://www.tiktok.com/@cdc.centraldecompas?_t=ZM-8vYQlF9u1dH&_r=1" target="_blank" aria-label="Nosso TikTok">
ย ย ย ย ย ย ย ย ย ย <div class="icon"><img src="logos/tiktok.png" alt="" loading="lazy"></div>
ย ย ย ย ย ย ย ย ย ย <span>TikTok</span>
ย ย ย ย ย ย ย ย </a>
ย ย ย ย ย ย ย ย <a href="https://www.instagram.com/cdccentrodecompras/?utm_source=qr&r=nametag" target="_blank" aria-label="Nosso Instagram">
ย ย ย ย ย ย ย ย ย ย <div class="icon"><img src="logos/instagram.png" alt="" loading="lazy" onerror="this.src='imagens/placeholder.jpg'"></div>
ย ย ย ย ย ย ย ย ย ย <span>Instagram</span>
ย ย ย ย ย ย ย ย </a>
ย ย ย ย ย ย ย ย <a href="https://x.com/ComprasCdc" target="_blank" aria-label="Nosso perfil no X">
ย ย ย ย ย ย ย ย ย ย <div class="icon"><img src="logos/x.png" alt="" loading="lazy" onerror="this.src='imagens/placeholder.jpg'"></div>
ย ย ย ย ย ย ย ย ย ย <span>X</span>
ย ย ย ย ย ย ย ย </a>
ย ย ย ย ย ย ย ย <a href="https://www.youtube.com/channel/UCaKHlI-hWqwdAXS6Xsv3ZzA" target="_blank" aria-label="Nosso canal no YouTube">
ย ย ย ย ย ย ย ย ย ย <div class="icon"><img src="logos/youtube.png" alt="" loading="lazy"></div>
ย ย ย ย ย ย ย ย ย ย <span>YouTube</span>
ย ย ย ย ย ย ย ย </a>
ย ย ย ย ย ย </div>
ย ย ย ย </main>
ย ย </div>
ย ย <div class="modal" id="imageModal" role="dialog" aria-labelledby="modal-titulo" aria-modal="true" tabindex="-1">
ย ย ย ย <h2 id="modal-titulo" class="sr-only">Visualizador de imagens do produto</h2>
ย ย ย ย <button class="modal-close" onclick="closeModal()" aria-label="Fechar visualizador de imagens">โ</button>
ย ย ย ย <div class="modal-content" id="modalCarrossel">
ย ย ย ย ย ย <div class="carrossel-imagens" id="modalCarrosselImagens"></div>
ย ย ย ย ย ย <button class="carrossel-prev" id="modalPrev" onclick="moveModalCarrossel(-1)" aria-label="Imagem anterior">โ</button>
ย ย ย ย ย ย <button class="carrossel-next" id="modalNext" onclick="moveModalCarrossel(1)" aria-label="Prรณxima imagem">โบ</button>
ย ย ย ย ย ย <div class="carrossel-dots" id="modalCarrosselDots"></div>
ย ย ย ย ย ย <p class="modal-error" id="modalError" style="display: none;" aria-live="assertive"></p>
ย ย ย ย </div>
ย ย </div>
ย ย <footer>
ย ย ย ย <p>๐ง Todos os direitos reservados <strong>Grupo Centro de Compra "CdC"</strong> ยฉ <span id="year"></span></p>
ย ย </footer>
ย ย <div class="robo-assistente">
ย ย ย ย <a href="https://wa.me/5521975179737" target="_blank" aria-label="Falar com o assistente virtual no WhatsApp">
ย ย ย ย ย ย <img src="imagens/robo.jpg" alt="Robรด Assistente" class="robo-imagem">
ย ย ย ย ย ย <div class="robo-texto">Posso ajudar?</div>
ย ย ย ย </a>
ย ย </div>
ย ย <script>
ย ย ย ย const VERSION = "1.0.8"; // Atualizado
ย ย ย ย const API_URL = 'https://minha-api-produtos.onrender.com';
ย ย ย ย let currentImages = [];
ย ย ย ย let currentImageIndex = 0;
ย ย ย ย let currentPage = 1;
ย ย ย ย const productsPerPage = 12;
ย ย ย ย let allProducts = [];
ย ย ย ย let isLoading = false;
ย ย ย ย let currentCategory = "todas";
ย ย ย ย let currentStore = "todas";
ย ย ย ย let currentSearch = "";

ย ย ย ย document.getElementById("year").textContent = new Date().getFullYear();

ย ย ย ย const logo = document.getElementById("site-logo");
ย ย ย ย let clickCount = 0, clickTimeout = null;
ย ย ย ย logo.addEventListener("click", (e) => {
ย ย ย ย ย ย e.stopPropagation();
ย ย ย ย ย ย clickCount++;
ย ย ย ย ย ย if (clickCount === 1) {
ย ย ย ย ย ย ย ย clickTimeout = setTimeout(() => { clickCount = 0; }, 500);
ย ย ย ย ย ย } else if (clickCount === 3) {
ย ย ย ย ย ย ย ย clearTimeout(clickTimeout);
ย ย ย ย ย ย ย ย window.location.href = "admin-xyz-123.html";
ย ย ย ย ย ย ย ย clickCount = 0;
ย ย ย ย ย ย }
ย ย ย ย });

ย ย ย ย async function carregarProdutos(categoria = "todas", loja = "todas", busca = "", page = 1) {
ย ย ย ย ย ย const gridProdutos = document.getElementById("grid-produtos");
ย ย ย ย ย ย const mensagemVazia = document.getElementById("mensagem-vazia");
ย ย ย ย ย ย const errorMessage = document.getElementById("error-message");
ย ย ย ย ย ย const loadingSpinner = document.getElementById("loading-spinner");
ย ย ย ย ย ย const loadMoreButton = document.getElementById("load-more");

ย ย ย ย ย ย if (isLoading) return;
ย ย ย ย ย ย isLoading = true;

ย ย ย ย ย ย loadingSpinner.style.display = "block";
ย ย ย ย ย ย if (page === 1) {
ย ย ย ย ย ย ย ย gridProdutos.innerHTML = "";
ย ย ย ย ย ย ย ย allProducts = [];
ย ย ย ย ย ย }
ย ย ย ย ย ย mensagemVazia.style.display = "none";
ย ย ย ย ย ย errorMessage.style.display = "none";
ย ย ย ย ย ย loadMoreButton.style.display = "none";

ย ย ย ย ย ย const maxRetries = 3;
ย ย ย ย ย ย let attempt = 1;

ย ย ย ย ย ย while (attempt <= maxRetries) {
ย ย ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย ย ย console.log(`Tentativa ${attempt}: Carregando de ${API_URL}/api/produtos?page=${page}&limit=${productsPerPage}`);
ย ย ย ย ย ย ย ย ย ย const response = await fetch(
ย ย ย ย ย ย ย ย ย ย ย ย `${API_URL}/api/produtos?page=${page}&limit=${productsPerPage}`,
ย ย ย ย ย ย ย ย ย ย ย ย { cache: "no-store" }
ย ย ย ย ย ย ย ย ย ย );
ย ย ย ย ย ย ย ย ย ย if (!response.ok) {
ย ย ย ย ย ย ย ย ย ย ย ย const errorText = await response.text();
ย ย ย ย ย ย ย ย ย ย ย ย throw new Error(`Erro HTTP ${response.status}: ${errorText || 'Resposta vazia'}`);
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย const data = await response.json();
ย ย ย ย ย ย ย ย ย ย if (!data || !Array.isArray(data.produtos)) {
ย ย ย ย ย ย ย ย ย ย ย ย throw new Error('Resposta invรกlida: produtos nรฃo รฉ um array');
ย ย ย ย ย ย ย ย ย ย }

ย ย ย ย ย ย ย ย ย ย const filteredProducts = data.produtos.filter(p =>
ย ย ย ย ย ย ย ย ย ย ย ย p &&
ย ย ย ย ย ย ย ย ย ย ย ย typeof p.nome === 'string' &&
ย ย ย ย ย ย ย ย ย ย ย ย typeof p.categoria === 'string' &&
ย ย ย ย ย ย ย ย ย ย ย ย typeof p.loja === 'string' &&
ย ย ย ย ย ย ย ย ย ย ย ย Array.isArray(p.imagens) &&
ย ย ย ย ย ย ย ย ย ย ย ย (categoria === "todas" || p.categoria.toLowerCase() === categoria.toLowerCase()) &&
ย ย ย ย ย ย ย ย ย ย ย ย (loja === "todas" || p.loja.toLowerCase() === loja.toLowerCase()) &&
ย ย ย ย ย ย ย ย ย ย ย ย (!busca || p.nome.toLowerCase().includes(busca.toLowerCase()))
ย ย ย ย ย ย ย ย ย ย );
ย ย ย ย ย ย ย ย ย ย allProducts = [...allProducts, ...filteredProducts];

ย ย ย ย ย ย ย ย ย ย if (allProducts.length === 0) {
ย ย ย ย ย ย ย ย ย ย ย ย mensagemVazia.style.display = "block";
ย ย ย ย ย ย ย ย ย ย ย ย gridProdutos.style.display = "none";
ย ย ย ย ย ย ย ย ย ย } else {
ย ย ย ย ย ย ย ย ย ย ย ย mensagemVazia.style.display = "none";
ย ย ย ย ย ย ย ย ย ย ย ย gridProdutos.style.display = "grid";
ย ย ย ย ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย ย ย ย ย const productsToRender = filteredProducts;

ย ย ย ย ย ย ย ย ย ย ย ย productsToRender.forEach((produto, index) => {
ย ย ย ย ย ย ย ย ย ย ย ย ย ย const card = document.createElement("div");
ย ย ย ย ย ย ย ย ย ย ย ย ย ย card.classList.add("produto-card", "visible");
ย ย ย ย ย ย ย ย ย ย ย ย ย ย card.setAttribute("data-categoria", produto.categoria.toLowerCase());
ย ย ย ย ย ย ย ย ย ย ย ย ย ย card.setAttribute("data-loja", produto.loja.toLowerCase());
ย ย ย ย ย ย ย ย ย ย ย ย ย ย const globalIndex = allProducts.indexOf(produto);
ย ย ย ย ย ย ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย ย ย ย ย ย ย const imagens = produto.imagens && produto.imagens.length > 0
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ? produto.imagens.map(img => img.startsWith('http') ? img : `${API_URL}${img}`)
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย : ["imagens/placeholder.jpg"];
ย ย ย ย ย ย ย ย ย ย ย ย ย ย const carrosselId = `carrossel-${globalIndex}`;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย card.innerHTML = `
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="carrossel" id="${carrosselId}">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="carrossel-imagens">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ${imagens.map((img, idx) => `<img src="${img}" alt="${produto.nome}" loading="lazy" onerror="this.src='imagens/placeholder.jpg'" onclick="event.stopPropagation(); openModal(${globalIndex}, ${idx})">`).join("")}
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ${imagens.length > 1 ? `
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button class="carrossel-prev" onclick="event.stopPropagation(); moveCarrossel('${carrosselId}', -1)" aria-label="Imagem anterior">โ</button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <button class="carrossel-next" onclick="event.stopPropagation(); moveCarrossel('${carrosselId}', 1)" aria-label="Prรณxima imagem">โบ</button>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <div class="carrossel-dots">
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ${imagens.map((_, idx) => `<span class="carrossel-dot ${idx === 0 ? "ativo" : ""}" onclick="event.stopPropagation(); setCarrosselImage('${carrosselId}', ${idx})" aria-label="Selecionar imagem ${idx + 1}"></span>`).join("")}
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ` : ""}
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย </div>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span>${produto.nome}</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <span class="descricao">Loja: ${produto.loja}</span>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย ย <a href="${produto.link}" target="_blank" class="tarja-preco" aria-label="Clique para ver o preรงo de ${produto.nome} na loja">Clique para ver o preรงo</a>
ย ย ย ย ย ย ย ย ย ย ย ย ย ย `;
ย ย ย ย ย ย ย ย ย ย ย ย ย ย gridProdutos.appendChild(card);
ย ย ย ย ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย 
ย ย ย ย ย ย ย ย ย ย loadMoreButton.style.display = data.total > allProducts.length ? "block" : "none";
ย ย ย ย ย ย ย ย ย ย isLoading = false;
ย ย ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย ย ย console.error(`โ๏ธ Tentativa ${attempt} falhou: ${error.message}`);
ย ย ย ย ย ย ย ย ย ย if (attempt === maxRetries) {
ย ย ย ย ย ย ย ย ย ย ย ย errorMessage.textContent = "Erro ao carregar os produtos. Tente novamente mais tarde.";
ย ย ย ย ย ย ย ย ย ย ย ย errorMessage.style.display = "block";
ย ย ย ย ย ย ย ย ย ย ย ย mensagemVazia.style.display = "none";
ย ย ย ย ย ย ย ย ย ย ย ย gridProdutos.style.display = "none";
ย ย ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย ย ย ย ย attempt++;
ย ย ย ย ย ย ย ย ย ย await new Promise(resolve => setTimeout(resolve, 1000 * attempt));
ย ย ย ย ย ย ย ย } finally {
ย ย ย ย ย ย ย ย ย ย loadingSpinner.style.display = "none";
ย ย ย ย ย ย ย ย ย ย isLoading = false;
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function carregarMaisProdutos() {
ย ย ย ย ย ย currentPage++;
ย ย ย ย ย ย carregarProdutos(currentCategory, currentStore, currentSearch, currentPage);
ย ย ย ย }

ย ย ย ย function moveCarrossel(id, direction) {
ย ย ย ย ย ย const carrossel = document.getElementById(id);
ย ย ย ย ย ย if (!carrossel) return;
ย ย ย ย ย ย const imagens = carrossel.querySelector(".carrossel-imagens");
ย ย ย ย ย ย const dots = carrossel.querySelectorAll(".carrossel-dot");
ย ย ย ย ย ย let index = parseInt(imagens.dataset.index || 0);
ย ย ย ย ย ย const total = imagens.children.length;
ย ย ย ย ย ย index = (index + direction + total) % total;
ย ย ย ย ย ย imagens.style.transform = `translateX(-${index * 100}%)`;
ย ย ย ย ย ย imagens.dataset.index = index;
ย ย ย ย ย ย dots.forEach((dot, i) => dot.classList.toggle("ativo", i === index));
ย ย ย ย }

ย ย ย ย function setCarrosselImage(id, index) {
ย ย ย ย ย ย const carrossel = document.getElementById(id);
ย ย ย ย ย ย if (!carrossel) return;
ย ย ย ย ย ย const imagens = carrossel.querySelector(".carrossel-imagens");
ย ย ย ย ย ย const dots = carrossel.querySelectorAll(".carrossel-dot");
ย ย ย ย ย ย imagens.style.transform = `translateX(-${index * 100}%)`;
ย ย ย ย ย ย imagens.dataset.index = index;
ย ย ย ย ย ย dots.forEach((dot, i) => dot.classList.toggle("ativo", i === index));
ย ย ย ย }

ย ย ย ย async function openModal(index, imageIndex) {
ย ย ย ย ย ย const modal = document.getElementById("imageModal");
ย ย ย ย ย ย const carrosselImagens = document.getElementById("modalCarrosselImagens");
ย ย ย ย ย ย const carrosselDots = document.getElementById("modalCarrosselDots");
ย ย ย ย ย ย const modalError = document.getElementById("modalError");
ย ย ย ย ย ย const prevButton = document.getElementById("modalPrev");
ย ย ย ย ย ย const nextButton = document.getElementById("modalNext");
ย ย ย ย ย ย if (!modal || !carrosselImagens || !carrosselDots || !modalError || !prevButton || !nextButton) {
ย ย ย ย ย ย ย ย console.error("Elementos do modal nรฃo encontrados");
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }

ย ย ย ย ย ย modalError.style.display = "none";
ย ย ย ย ย ย carrosselImagens.innerHTML = "";
ย ย ย ย ย ย carrosselDots.innerHTML = "";
ย ย ย ย ย ย prevButton.classList.remove("visible");
ย ย ย ย ย ย nextButton.classList.remove("visible");
ย ย ย ย ย ย 
ย ย ย ย ย ย const produto = allProducts[index];
ย ย ย ย ย ย if (!produto || !produto.imagens || produto.imagens.length === 0) {
ย ย ย ย ย ย ย ย modalError.textContent = "Nenhuma imagem disponรญvel para este produto.";
ย ย ย ย ย ย ย ย modalError.style.display = "block";
ย ย ย ย ย ย ย ย modal.style.display = "flex";
ย ย ย ย ย ย ย ย return;
ย ย ย ย ย ย }

ย ย ย ย ย ย try {
ย ย ย ย ย ย ย ย currentImages = produto.imagens.map(img => img.startsWith('http') ? img : `${API_URL}${img}`);
ย ย ย ย ย ย ย ย currentImageIndex = Math.max(0, Math.min(imageIndex, currentImages.length - 1));

ย ย ย ย ย ย ย ย carrosselImagens.innerHTML = currentImages.map((img, idx) => `<img src="${img}" alt="${produto.nome} - Imagem ${idx + 1}" loading="lazy" onerror="this.src='imagens/placeholder.jpg'">`).join("");
ย ย ย ย ย ย ย ย carrosselImagens.style.transform = `translateX(-${currentImageIndex * 100}%)`;

ย ย ย ย ย ย ย ย carrosselDots.innerHTML = currentImages.map((_, i) => `<span class="carrossel-dot ${i === currentImageIndex ? "ativo" : ""}" onclick="setModalCarrosselImage(${i})" aria-label="Selecionar imagem ${i + 1}"></span>`).join("");

ย ย ย ย ย ย ย ย prevButton.classList.toggle("visible", currentImages.length > 1);
ย ย ย ย ย ย ย ย nextButton.classList.toggle("visible", currentImages.length > 1);
ย ย ย ย ย ย ย ย modal.style.display = "flex";
ย ย ย ย ย ย } catch (error) {
ย ย ย ย ย ย ย ย console.error("Erro ao abrir modal:", error);
ย ย ย ย ย ย ย ย modalError.textContent = "Erro ao carregar as imagens. Tente novamente.";
ย ย ย ย ย ย ย ย modalError.style.display = "block";
ย ย ย ย ย ย ย ย modal.style.display = "flex";
ย ย ย ย ย ย }
ย ย ย ย }

ย ย ย ย function moveModalCarrossel(direction) {
ย ย ย ย ย ย const carrosselImagens = document.getElementById("modalCarrosselImagens");
ย ย ย ย ย ย const carrosselDots = document.getElementById("modalCarrosselDots")?.children;
ย ย ย ย ย ย if (!carrosselImagens || !carrosselDots || !currentImages.length) return;

ย ย ย ย ย ย const total = currentImages.length;
ย ย ย ย ย ย currentImageIndex = (currentImageIndex + direction + total) % total;
ย ย ย ย ย ย 
ย ย ย ย ย ย carrosselImagens.style.transform = `translateX(-${currentImageIndex * 100}%)`;
ย ย ย ย ย ย Array.from(carrosselDots).forEach((dot, i) => dot.classList.toggle("ativo", i === currentImageIndex));
ย ย ย ย }

ย ย ย ย function setModalCarrosselImage(index) {
ย ย ย ย ย ย if (index < 0 || index >= currentImages.length) return;
ย ย ย ย ย ย 
ย ย ย ย ย ย currentImageIndex = index;
ย ย ย ย ย ย const carrosselImagens = document.getElementById("modalCarrosselImagens");
ย ย ย ย ย ย const carrosselDots = document.getElementById("modalCarrosselDots")?.children;
ย ย ย ย ย ย if (!carrosselImagens || !carrosselDots) return;
ย ย ย ย ย ย 
ย ย ย ย ย ย carrosselImagens.style.transform = `translateX(-${index * 100}%)`;
ย ย ย ย ย ย Array.from(carrosselDots).forEach((dot, i) => dot.classList.toggle("ativo", i === index));
ย ย ย ย }

ย ย ย ย function closeModal() {
ย ย ย ย ย ย const modal = document.getElementById("imageModal");
ย ย ย ย ย ย if (modal) modal.style.display = "none";
ย ย ย ย ย ย currentImages = [];
ย ย ย ย ย ย currentImageIndex = 0;
ย ย ย ย }

ย ย ย ย function filtrarPorCategoria(categoria) {
ย ย ย ย ย ย document.querySelectorAll(".categoria-item").forEach(item => {
ย ย ย ย ย ย ย ย const isActive = item.dataset.categoria === categoria;
ย ย ย ย ย ย ย ย item.classList.toggle("ativa", isActive);
ย ย ย ย ย ย ย ย item.setAttribute("aria-selected", isActive);
ย ย ย ย ย ย });
ย ย ย ย ย ย currentCategory = categoria;
ย ย ย ย ย ย currentPage = 1;
ย ย ย ย ย ย carregarProdutos(currentCategory, currentStore, currentSearch, currentPage);
ย ย ย ย }

ย ย ย ย function filtrarPorLoja(loja) {
ย ย ย ย ย ย document.querySelectorAll(".loja, .loja-todas").forEach(item => {
ย ย ย ย ย ย ย ย const isActive = item.dataset.loja === loja;
ย ย ย ย ย ย ย ย item.classList.toggle("ativa", isActive);
ย ย ย ย ย ย ย ย item.setAttribute("aria-pressed", isActive);
ย ย ย ย ย ย });
ย ย ย ย ย ย currentStore = loja;
ย ย ย ย ย ย currentPage = 1;
ย ย ย ย ย ย carregarProdutos(currentCategory, currentStore, currentSearch, currentPage);
ย ย ย ย }

ย ย ย ย document.addEventListener("DOMContentLoaded", () => {
ย ย ย ย ย ย const buscaInput = document.getElementById("busca");
ย ย ย ย ย ย if (buscaInput) {
ย ย ย ย ย ย ย ย buscaInput.addEventListener("input", (e) => {
ย ย ย ย ย ย ย ย ย ย currentSearch = e.target.value.toLowerCase();
ย ย ย ย ย ย ย ย ย ย currentPage = 1;
ย ย ย ย ย ย ย ย ย ย carregarProdutos(currentCategory, currentStore, currentSearch, currentPage);
ย ย ย ย ย ย ย ย });
ย ย ย ย ย ย }
ย ย ย ย ย ย carregarProdutos();
ย ย ย ย });

ย ย ย ย window.addEventListener('keyup', (event) => {
ย ย ย ย ย ย const modal = document.getElementById('imageModal');
ย ย ย ย ย ย if (modal.style.display === 'flex') {
ย ย ย ย ย ย ย ย if (event.key === 'ArrowLeft') {
ย ย ย ย ย ย ย ย ย ย moveModalCarrossel(-1);
ย ย ย ย ย ย ย ย } else if (event.key === 'ArrowRight') {
ย ย ย ย ย ย ย ย ย ย moveModalCarrossel(1);
ย ย ย ย ย ย ย ย } else if (event.key === 'Escape') {
ย ย ย ย ย ย ย ย ย ย closeModal();
ย ย ย ย ย ย ย ย }
ย ย ย ย ย ย }
ย ย ย ย });
ย ย </script>
</body>
</html>
