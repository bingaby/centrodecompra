-- Criar Banco de Dados
CREATE DATABASE centro_de_compras;
USE centro_de_compras;

-- Tabela para Categorias
CREATE TABLE categories (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Tabela para Lojas
CREATE TABLE stores (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    logo_url VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Tabela para Produtos
CREATE TABLE products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    category_id INT NOT NULL,
    store_id INT NOT NULL,
    link VARCHAR(255) NOT NULL,
    created_at TIMESTAMP-specified in the query, but it should be replaced with a valid timestamp or removed if not needed. Since no specific timestamp was provided, I'll assume you want to use the default `CURRENT_TIMESTAMP` for `created_at` and `updated_at`. Here's the corrected and complete SQL script for the banco de dados, incorporating all tables, indices, initial data, and example operations, ensuring clarity and correctness.

### Banco de Dados Completo

Below is the complete SQL script for creating the `centro_de_compras` database, including table creation, indices, initial data (seeds), and example CRUD operations. This schema supports all functionalities described in the provided HTML files (`index.html` and `adicionar-produtos.html`), replacing `localStorage` with a relational database.

```sql
-- Criar Banco de Dados
CREATE DATABASE centro_de_compras;
USE centro_de_compras;

-- Tabela para Categorias
CREATE TABLE categories (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Tabela para Lojas
CREATE TABLE stores (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(50) NOT NULL UNIQUE,
    logo_url VARCHAR(255),
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Tabela para Produtos
CREATE TABLE products (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(255) NOT NULL,
    category_id INT NOT NULL,
    store_id INT NOT NULL,
    link VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    FOREIGN KEY (category_id) REFERENCES categories(id) ON DELETE RESTRICT,
    FOREIGN KEY (store_id) REFERENCES stores(id) ON DELETE RESTRICT
);

-- Tabela para Imagens dos Produtos
CREATE TABLE product_images (
    id INT AUTO_INCREMENT PRIMARY KEY,
    product_id INT NOT NULL,
    image_url VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES products(id) ON DELETE CASCADE
);

-- Índices para otimizar buscas
CREATE INDEX idx_product_name ON products(name);
CREATE INDEX idx_category_id ON products(category_id);
CREATE INDEX idx_store_id ON products(store_id);

-- Inserir Categorias
INSERT INTO categories (name) VALUES
('Eletrônicos'),
('Moda'),
('Fitness'),
('Casa e Decoração'),
('Beleza'),
('Esportes'),
('Livros'),
('Infantil'),
('Celulares'),
('Eletrodomésticos');

-- Inserir Lojas
INSERT INTO stores (name, logo_url) VALUES
('Amazon', 'logos/amazon.png'),
('Magalu', 'logos/magalu.png'),
('Shein', 'logos/shein.png'),
('Shopee', 'logos/shopee.png'),
('Mercado Livre', 'logos/mercadolivre.jpg'),
('Alibaba', 'logos/alibaba.png');

-- Exemplo de Inserção de Produtos
INSERT INTO products (name, category_id, store_id, link)
VALUES ('Smartphone Samsung Galaxy', 9, 1, 'https://amazon.com.br/smartphone-samsung');

INSERT INTO product_images (product_id, image_url)
VALUES
(LAST_INSERT_ID(), 'uploads/smartphone_1.jpg'),
(LAST_INSERT_ID(), 'uploads/smartphone_2.jpg');

INSERT INTO products (name, category_id, store_id, link)
VALUES ('Vestido Floral', 2, 3, 'https://shein.com/vestido-floral');

INSERT INTO product_images (product_id, image_url)
VALUES
(LAST_INSERT_ID(), 'uploads/vestido_1.jpg'),
(LAST_INSERT_ID(), 'uploads/vestido_2.jpg'),
(LAST_INSERT_ID(), 'uploads/vestido_3.jpg');