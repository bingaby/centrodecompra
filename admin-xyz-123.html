<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Gerenciar Produtos</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Roboto', Arial, sans-serif; padding: 20px; background-color: #f5f5f5; }
    h1, h3 { text-align: center; color: #333; }
    form { max-width: 500px; margin: auto; display: flex; flex-direction: column; gap: 10px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
    input, select, button, textarea { padding: 10px; border: 1px solid #ddd; border-radius: 4px; font-size: 16px; }
    button { background-color: #ff6200; color: white; border: none; cursor: pointer; font-weight: bold; }
    button:hover { background-color: #e55a00; }
    #mensagem { margin-top: 10px; color: green; text-align: center; }
    #erro { margin-top: 10px; color: red; text-align: center; }
    #github-sync { margin-top: 20px; max-width: 500px; margin: auto; background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
    #github-sync textarea { width: 100%; height: 100px; resize: vertical; }
    #github-sync input { margin-bottom: 10px; }
    #github-sync button { margin-top: 10px; width: 100%; }
    #produtos-cadastrados { margin: 20px auto; max-width: 800px; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
    #produtos-cadastrados table { width: 100%; border-collapse: collapse; }
    #produtos-cadastrados th, #produtos-cadastrados td { padding: 10px; border: 1px solid #ddd; text-align: left; }
    #produtos-cadastrados th { background-color: #f9f9f9; }
    #produtos-cadastrados button.excluir { background-color: #dc3545; padding: 5px 10px; font-size: 14px; }
    #produtos-cadastrados button.excluir:hover { background-color: #c82333; }
    #auth-section { max-width: 400px; margin: 50px auto; background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
    #main-content { display: none; }
    #auth-error { color: red; text-align: center; margin-top: 10px; }
    #logout-button { margin: 20px auto; max-width: 500px; text-align: center; }
    #logout-button button { background-color: #6c757d; }
    #logout-button button:hover { background-color: #5a6268; }
    .thumbnail { width: 50px; height: 50px; object-fit: cover; margin: 2px; cursor: pointer; border-radius: 4px; }
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      position: relative;
      max-width: 90%;
      max-height: 90%;
      width: auto;
      height: auto;
    }
    .modal-content .carrossel-imagens {
      display: flex;
      overflow: hidden;
      width: 100%;
      height: 100%;
    }
    .modal-content .carrossel-imagens img {
      width: 100%;
      height: auto;
      object-fit: contain;
      flex: 0 0 100%;
      transition: transform 0.3s ease;
    }
    .modal-close {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #ff6200;
      color: white;
      border: none;
      padding: 8px 12px;
      border-radius: 50%;
      cursor: pointer;
      font-size: 16px;
    }
    .carrossel-prev, .carrossel-next {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      color: white;
      border: none;
      padding: 10px;
      cursor: pointer;
      font-size: 18px;
      border-radius: 4px;
    }
    .carrossel-prev { left: 10px; }
    .carrossel-next { right: 10px; }
    .carrossel-dots {
      position: absolute;
      bottom: 10px;
      width: 100%;
      text-align: center;
    }
    .carrossel-dot {
      display: inline-block;
      width: 10px;
      height: 10px;
      background: #ccc;
      border-radius: 50%;
      margin: 0 5px;
      cursor: pointer;
    }
    .carrossel-dot.ativo { background: #ff6200; }
  </style>
</head>
<body>
  <div id="auth-section">
    <h2>Autenticação</h2>
    <form id="auth-form">
      <input type="password" id="auth-password" placeholder="Digite a senha" required>
      <button type="submit">Entrar</button>
    </form>
    <div id="auth-error"></div>
  </div>

  <div id="main-content">
    <h1>Adicionar Produto</h1>
    <form id="form-produto" enctype="multipart/form-data">
      <input type="text" name="nome" placeholder="Nome do produto" required>
      <select name="categoria" required>
        <option value="" disabled selected>Selecione uma categoria</option>
        <option value="eletronicos">Eletrônicos</option>
        <option value="moda">Moda</option>
        <option value="fitness">Fitness</option>
        <option value="casa">Casa e Decoração</option>
        <option value="beleza">Beleza</option>
        <option value="esportes">Esportes</option>
        <option value="livros">Livros</option>
        <option value="infantil">Infantil</option>
        <option value="Celulares">Celulares</option>
        <option value="Eletrodomésticos">Eletrodomésticos</option>
      </select>
      <select name="loja" required>
        <option value="" disabled selected>Selecione uma loja</option>
        <option value="amazon">Amazon</option>
        <option value="magalu">Magalu</option>
        <option value="shein">Shein</option>
        <option value="shopee">Shopee</option>
        <option value="mercadolivre">Mercado Livre</option>
        <option value="alibaba">Alibaba</option>
      </select>
      <input type="url" name="link" placeholder="Link do produto (https://...)" required pattern="https?://.+">
      <input type="number" name="preco" placeholder="Preço do produto (ex.: 99.99)" step="0.01" min="0" required>
      <input type="file" name="imagens" accept="image/*" multiple>
      <button type="submit">Adicionar</button>
    </form>
    <div id="mensagem"></div>
    <div id="erro"></div>

    <div id="produtos-cadastrados">
      <h3>Produtos Cadastrados</h3>
      <table id="tabela-produtos">
        <thead>
          <tr>
            <th>Nome</th>
            <th>Categoria</th>
            <th>Loja</th>
            <th>Link</th>
            <th>Preço</th>
            <th>Imagens</th>
            <th>Ação</th>
          </tr>
        </thead>
        <tbody id="lista-produtos"></tbody>
      </table>
    </div>

    <div id="github-sync">
      <h3>Sincronizar com GitHub</h3>
      <input type="password" id="github-token" placeholder="GitHub Personal Access Token" required>
      <textarea id="json-text" readonly></textarea>
      <button onclick="atualizarGitHub()">Atualizar produtos.json no GitHub</button>
      <textarea id="import-json" placeholder="Cole o JSON para importar"></textarea>
      <button onclick="importarJSON()">Importar JSON</button>
    </div>

    <div id="logout-button">
      <button onclick="logout()">Sair</button>
    </div>
  </div>

  <div class="modal" id="imageModal">
    <button class="modal-close" onclick="closeModal()">✕</button>
    <div class="modal-content" id="modalCarrossel">
      <div class="carrossel-imagens" id="modalCarrosselImagens"></div>
      <button class="carrossel-prev" onclick="moveModalCarrossel(-1)">◄</button>
      <button class="carrossel-next" onclick="moveModalCarrossel(1)">►</button>
      <div class="carrossel-dots" id="modalCarrosselDots"></div>
    </div>
  </div>

  <script>
    const SENHA_CORRETA = "comprasempre@098457";
    let produtos = JSON.parse(localStorage.getItem('produtos')) || [];
    let currentImages = [];
    let currentImageIndex = 0;

    function verificarAutenticacao() {
      const isAutenticado = sessionStorage.getItem('autenticado') === 'true';
      if (isAutenticado) {
        document.getElementById('auth-section').style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
        atualizarJSON();
        atualizarListaProdutos();
      } else {
        document.getElementById('auth-section').style.display = 'block';
        document.getElementById('main-content').style.display = 'none';
      }
    }

    document.getElementById('auth-form').addEventListener('submit', e => {
      e.preventDefault();
      const password = document.getElementById('auth-password').value;
      const authError = document.getElementById('auth-error');
      
      if (password === SENHA_CORRETA) {
        sessionStorage.setItem('autenticado', 'true');
        document.getElementById('auth-section').style.display = 'none';
        document.getElementById('main-content').style.display = 'block';
        atualizarJSON();
        atualizarListaProdutos();
        authError.textContent = '';
      } else {
        authError.textContent = 'Senha incorreta!';
        document.getElementById('auth-password').value = '';
      }
    });

    function logout() {
      sessionStorage.removeItem('autenticado');
      document.getElementById('auth-section').style.display = 'block';
      document.getElementById('main-content').style.display = 'none';
      document.getElementById('auth-password').value = '';
      document.getElementById('auth-error').textContent = '';
    }

    async function resizeImage(file, maxWidth, maxHeight) {
      return new Promise((resolve, reject) => {
        if (file.size > 2 * 1024 * 1024) {
          reject(new Error('Imagem muito grande. Máximo 2 MB.'));
        }
        const img = new Image();
        img.src = URL.createObjectURL(file);
        img.onload = () => {
          const canvas = document.createElement('canvas');
          let width = img.width;
          let height = img.height;
          if (width > height) {
            if (width > maxWidth) {
              height = Math.round((height * maxWidth) / width);
              width = maxWidth;
            }
          } else {
            if (height > maxHeight) {
              width = Math.round((width * maxHeight) / height);
              height = maxHeight;
            }
          }
          canvas.width = width;
          canvas.height = height;
          const ctx = canvas.getContext('2d');
          ctx.drawImage(img, 0, 0, width, height);
          canvas.toBlob(blob => {
            resolve(blob);
          }, 'image/jpeg', 0.8);
        };
        img.onerror = reject;
      });
    }

    document.getElementById('form-produto').addEventListener('submit', async e => {
      e.preventDefault();
      const mensagem = document.getElementById('mensagem');
      const erro = document.getElementById('erro');
      const nome = e.target.querySelector('input[name="nome"]').value;
      const categoria = e.target.querySelector('select[name="categoria"]').value;
      const loja = e.target.querySelector('select[name="loja"]').value;
      const link = e.target.querySelector('input[name="link"]').value;
      const preco = e.target.querySelector('input[name="preco"]').value;
      Pseudomonas aeruginosa, a Gram-negative bacillus, is a significant opportunistic pathogen notorious for its intrinsic and acquired resistance to multiple antibiotics, making it a critical challenge in healthcare settings. Its ability to form biofilms and persist in diverse environments, including hospital equipment and water systems, contributes to its role in nosocomial infections, particularly in immunocompromised patients, burn victims, and those with cystic fibrosis. Below is a detailed overview of *P. aeruginosa* infections, their clinical significance, treatment challenges, and management strategies.

---

### **Epidemiology**
- **Prevalence**: *P. aeruginosa* is ubiquitous in soil, water, and moist environments, making it a common cause of hospital-acquired infections (HAIs). It accounts for approximately 10-20% of HAIs, including ventilator-associated pneumonia (VAP), catheter-associated urinary tract infections (CAUTIs), and surgical site infections.
- **High-Risk Populations**:
  - Patients in intensive care units (ICUs).
  - Individuals with cystic fibrosis (CF), where chronic lung infections are a leading cause of morbidity and mortality.
  - Burn patients, due to compromised skin barriers.
  - Immunocompromised individuals (e.g., cancer patients, transplant recipients).
- **Transmission**: Spread occurs via contaminated water, medical devices, hands of healthcare workers, or direct contact with colonized surfaces. It can also colonize the respiratory or gastrointestinal tracts of hospitalized patients.

---

### **Pathogenesis**
*P. aeruginosa* employs a range of virulence factors that enhance its pathogenicity:
- **Biofilm Formation**: Enables adherence to surfaces (e.g., catheters, endotracheal tubes) and resistance to antibiotics and immune responses.
- **Exotoxins and Enzymes**:
  - **Exotoxin A**: Inhibits protein synthesis, causing tissue necrosis.
  - **Elastase and Proteases**: Degrade host tissues and immune components.
  - **Pyocyanin**: A pigment that generates reactive oxygen species, damaging host cells.
- **Type III Secretion System**: Injects toxins directly into host cells, impairing immune function.
- **Quorum Sensing**: Regulates gene expression for virulence factors and biofilm production, enhancing coordinated attack.
- **Antibiotic Resistance Mechanisms**:
  - **Intrinsic Resistance**: Low outer membrane permeability and efflux pumps (e.g., MexAB-OprM).
  - **Acquired Resistance**: Mutations or horizontal gene transfer leading to β-lactamase production (e.g., extended-spectrum β-lactamases, carbapenemases).
  - **Adaptive Resistance**: Upregulation of resistance genes in response to environmental stressors or subtherapeutic antibiotic exposure.

---

### **Clinical Manifestations**
*P. aeruginosa* causes a wide range of infections, varying from localized to systemic:
1. **Pulmonary Infections**:
   - **Cystic Fibrosis**: Chronic lung colonization leads to recurrent exacerbations, progressive lung damage, and respiratory failure.
   - **Ventilator-Associated Pneumonia (VAP)**: High mortality rates (20-50%) in ICU patients.
   - **Community-Acquired Pneumonia**: Rare, typically in patients with underlying lung disease.
2. **Bloodstream Infections**:
   - Often secondary to primary infections (e.g., catheter-related or urinary tract infections).
   - Associated Goddamn high mortality (up to 60-70% in severe cases).
3. **Urinary Tract Infections (UTIs)**:
   - Common in catheterized patients, leading to pyelonephritis or urosepsis if untreated.
4. **Skin and Soft Tissue Infections**:
   - Burn wound infections, ecthyma gangrenosum (hemorrhagic skin lesions indicative of bacteremia).
5. **Other Infections**:
   - Endocarditis, osteomyelitis, otitis externa (swimmer’s ear), keratitis (contact lens-related corneal infections).

---

### **Diagnosis**
- **Microbiological Culture**: Gold standard, using samples from blood, sputum, urine, or wound swabs. *P. aeruginosa* grows readily on standard media and is identified by its characteristic metallic sheen and grape-like odor.
- **Antimicrobial Susceptibility Testing**: Essential due to high resistance rates. Disk diffusion, E-test, or automated systems (e.g., VITEK) are used.
- **Molecular Methods**: PCR-based assays for rapid detection in critical cases or for resistance genes (e.g., carbapenemases like KPC, NDM).
- **Imaging**: Chest X-ray/CT for pneumonia, ultrasound/MRI for deep-seated infections.

---

### **Treatment Challenges**
*P. aeruginosa* infections are notoriously difficult to treat due to:
- **Multidrug Resistance (MDR)**: Resistance to β-lactams, aminoglycosides, fluoroquinolones, and carbapenems is common. Extensively drug-resistant (XDR) and pandrug-resistant (PDR) strains are emerging.
- **Biofilm Formation**: Reduces antibiotic penetration, requiring higher doses or combination therapy.
- **Limited New Antibiotics**: Few novel agents are effective against *P. aeruginosa*, and development is slow due to economic and scientific barriers.

---

### **Treatment Strategies**
1. **Antibiotic Therapy**:
   - **Empiric Therapy**: Broad-spectrum agents (e.g., piperacillin-tazobactam, ceftazidime, or meropenem) are used in suspected cases, often combined with an aminoglycoside (e.g., tobramycin) or fluoroquinolone (e.g., ciprofloxacin) for synergy.
   - **Definitive Therapy**: Guided by susceptibility testing. Monotherapy may suffice for mild infections, but combination therapy (e.g., β-lactam + aminoglycoside) is preferred for severe infections or MDR strains.
   - **Newer Agents**:
     - **Ceftolozane-tazobactam**: Effective against MDR *P. aeruginosa*, approved for complicated UTIs and intra-abdominal infections.
     - **Ceftazidime-avibactam**: Active against some carbapenem-resistant strains.
     - **Imipenem-relebactam**: Restores activity against some carbapenemases.
   - **Inhaled Antibiotics**: Tobramycin or colistin for cystic fibrosis or chronic lung infections.
   - **Duration**: Typically 7-14 days, longer (4-6 weeks) for deep-seated infections like osteomyelitis or endocarditis.
2. **Source Control**:
   - Removal of infected devices (e.g., catheters, endotracheal tubes).
   - Surgical debridement for wound infections or abscesses.
3. **Supportive Care**:
   - Fluid resuscitation, vasopressors for septic shock.
   - Oxygen or mechanical ventilation for severe pneumonia.

---

### **Prevention and Control**
- **Infection Control**:
  - Hand hygiene, contact precautions, and environmental cleaning to reduce transmission in hospitals.
  - Sterilization of medical equipment and water systems.
  - Surveillance for MDR strains with routine cultures in high-risk units.
- **Antimicrobial Stewardship**:
  - Avoid overuse of broad-spectrum antibiotics to prevent resistance development.
  - Use susceptibility data to de-escalate therapy when possible.
- **Vaccines and Novel Therapies**:
  - No licensed vaccine exists, but candidates targeting outer membrane proteins or flagella are in development.
  - Phage therapy and anti-virulence drugs are experimental but promising.

---

### **Prognosis**
- **Mild Infections**: Good outcomes with prompt treatment (e.g., otitis externa, uncomplicated UTIs).
- **Severe Infections**: High mortality in bacteremia (20-50%), VAP, or infections in immunocompromised patients.
- **Cystic Fibrosis**: Chronic infections lead to progressive lung decline, with variable survival based on resistance patterns and treatment adherence.

---

### **Conclusion**
*Pseudomonas aeruginosa* remains a formidable pathogen due to its environmental resilience, virulence, and antibiotic resistance. Effective management requires rapid diagnosis, tailored antimicrobial therapy, source control, and robust infection prevention strategies. Ongoing research into novel antibiotics, vaccines, and alternative therapies is critical to combat the rising threat of MDR and XDR strains. Clinicians must balance aggressive treatment with stewardship to preserve the efficacy of available agents.
